#+title: [[./00_prerequis.org][ST2CSE]]
#+description: ST2CSE
#+author: remi.griot@efrei.fr
#+SETUPFILE: https://fniessen.github.io/org-html-themes/org/theme-readtheorg.setup
#+OPTIONS: num:nil
#+LINK_UP: 
#+LINK_HOME: index.html


Le projet consiste en la conception d'un système électronique composé 
+ d'une carte mère acceuillant un microcontroller
+ une carte fille acceuillant les capteurs et les actionneurs 
+ le boitier acceuillant les deux cartes mentionnés ci dessus

Il est vivement conseillé de vous baser sur les notions vu en TPs pour réaliser le projet. 

#+attr_html: :width 300px
#+CAPTION: Exemple de réalisation
[[./img/projet_1.png]]

Le projet doit répondre aux exigences (requirements) suivantes. C'est la réponse aux exigences qui permettra l'évaluation du projet.
Le système de priorité des exigences est comme suit:
1) Exigences de première ordre (à réaliser en premier)
2) Exigences de second ordre


* Exigences programmes 

+ 1) Le programme contient un automate (machine à état) changeant d’état à chaque appuie sur un des bouton poussoir
+ 1) L’état initiale est l’Etat1
+ 1) L’état courant est affiché sur la liaison série toutes les 500 ms
+ 1) Etat1: Affichage de la température en °C par le capteur de température situé dans le µC
+ 2) Etat2: Affichage de la température en °C par le capteur de température situé sur la carte fille
+ 1) Etat3: Affichage en mm de la distance relevé par le sonar
+ 2) Etat4: Affichage en ° de l’inclinaison en X, Y et Z relevé par le gyroscope
+ 1) La séquence des états est : Etat1 -> Etat2 -> Etat3 -> Etat4 -> Etat1
+ 1) La vitesse de la liaison série est 115200 bd/s
+ 1) Par un appuie long (>1s), le deuxième bouton poussoir permet de changer la lumière du fond d’écran LCD (backlight), quel que soit l’état courant
+ 1) La led clignote à une fréquence de 1Hz (500ms ON, 500 ms OFF), quel que soit l’état, sur position basse du potentiometre
+ 2) L’état courant est affiché sur l’écran LCD
+ 2) Par un appuie court (<1s), le deuxième bouton poussoir permet de changer la couleur de la LED adressable (soit rouge, soit bleu, soit vert),  quel que soit l’état courant  
+ 2) La course du potentiomètre permet d'augmenter la fréquence de clignotement de la LED, jusqu'à 10Hz
  
* Exigences boitier

+ 1) Les parties imprimées en 3D doivent être auto portantes (pas de support)
+ 1) Les parties découpées au laser font 3mm d’épaisseur
+ 1) La carte mère doit être fixée au fond du boitier (entretoises M3 de longueur 10 mm)
+ 1) Le boitier contient la carte fille et la carte mère
+ 1) Dimensions maximales extérieures : 85 mm de large 95 mm de long et 60 mm de haut
+ 1) Le boitier doit laisser apparent le connecteur USB de la carte mère
+ 1) Le boitier doit faire intervenir dans sa fabrication de l’impression 3D et de la découpe laser
+ 1) Le boitier doit pas faire intervenir dans sa fabrication d'opération manuel (perçage,  ponçage, découpe...)
+ 1) L’écran LCD doit être visible sur l’un des côtés du boitier
+ 1) La lettre du binome et la majeure doivent apparaitre sur le boitier
+ 2) Le boitier doit se fermer solidement (écrou-visse-insert-clip)
+ 2) Le potentiomètre doit être sur la face opposée à l'écran  
+ 2) Le sonar doit être visible du côté opposé au connecteur USB
+ 2) Les LED doivent être visibles sur le dessus du boitier (guide lumière disponible)


** Modèles 
[[./mdl/Stm32_Nucleo.SLDPRT][Modèle carte Nucleo]]


* Exigences circuit imprimé de la carte fille

+ 1) La carte fille doit avoir des dimensions maximales : 54 mm * 60 mm
+ 1) Le circuit imprimé doit avoir un plan de masse
+ 1) Les noms des broches de chaque connecteur doivent apparaitre en sérigraphie sur le PCB
+ 1) La lettre du binome et la majeure doivent apparaitre en sérigraphie sur le PCB
+ 1) Des points de tests doivent être prévu

* Reference des composants


| Item                  | Ref                       | Bus/Interface  | Footprint-Boitier | Alimentation   | Key word easyeda |
|-----------------------+---------------------------+----------------+-------------------+----------------+------------------|
| Carte Microcontroleur | [[../stm/stm32_l476_schematic.pdf][NUCLEO STM32L476RG]]        |                | Arduino R3 Shield | /A determiner/ |                  |
| Centrale inertielle   | [[https://controllerstech.com/how-to-interface-mpu6050-gy-521-with-stm32/][MPU6050 - GY521]] [[./doc/projet/accel_MPU6050.pdf][datasheet]] | I2C            | 8*2.54 mm HEADER  | /A determiner/ |                  |
| Ecran LCD             | [[https://wiki.seeedstudio.com/Grove-LCD_RGB_Backlight/][Grove LCD RGB BackLight]]   | I2C            | 4*2 mm HEADER     | /A determiner/ | hdr​_2mm​_1x4      |
| Bouton poussoir       | [[https://fr.rs-online.com/web/p/interrupteurs-tactiles/4791508][Tactile swicth]]            | GPIO           | 6*6 mm SMD        | /A determiner/ |                  |
| RGB LED Addressable   | [[https://fr.farnell.com/tenma/25-7524/addressable-rgb-leds-smd5050-10/dp/2801875][Lien]]  [[./doc/projet/led_addressable.pdf][datasheet]]           | GPIO           | SMD5050           | /A determiner/ |                  |
| LED                   | [[./doc/projet/led_simple.pdf][datasheet]]                 | /A determiner/ | SMD1206           | /A determiner/ |                  |
| Sonar                 | [[https://controllerstech.com/hcsr04-ultrasonic-sensor-and-stm32/][HCR SR-04]] [[./doc/projet/HCSR04.pdf][datasheet]]       | /A determiner/ | 4*2.54mm HEADER   | /A determiner/ |                  |
| Resistances           | NC                        | NC             | SMD1206           | /A determiner/ |                  |
| Potentiomètre         | Linéaire 10kOhm           | /A determiner/ | 3*2.54mm HEADER   | /A determiner/ |                  |
| Capteur Température   | [[./doc/projet/tmp36grtz.pdf][TMP36grtz]]                 | /A determiner/ | SOT-23            | /A determiner/ |                  |

